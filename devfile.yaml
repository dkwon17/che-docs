schemaVersion: 2.1.0
metadata:
  name: che-docs-test-2
  attributes:
    metadata-name-field: name
projects:
  - attributes: {}
    name: che-docs
    git:
      remotes:
        origin: https://github.com/eclipse/che-docs.git
components:
  - name: che-docs
    container:
      image: quay.io/eclipse/che-docs:latest
      command:
        - tail
      args:
        - -f
        - /dev/null
      memoryLimit: 512M
      mountSources: true
      endpoints:
        - name: open-livereload
          targetPort: 35729
        - name: open-preview-server
          targetPort: 4000
          attributes:
            path: /che-7/overview/introduction-to-eclipse-che/
commands:
  - id: generate-reference-tables-for-environment-variables
    exec:
      label: Generate reference tables for environment variables
      commandLine: bash tools/environment_docs_gen.sh
      component: che-docs
      workingDir: /projects/che-docs
  - id: generate-reference-tables-for-checluster
    exec:
      label: Generate reference tables for CheCluster
      commandLine: bash tools/checluster_docs_gen.sh
      component: che-docs
      workingDir: /projects/che-docs
  - id: start-preview-server
    exec:
      label: Start preview server
      commandLine: sh tools/preview.sh
      component: che-docs
      workingDir: /projects/che-docs
  - id: create-a-new-topic
    exec:
      label: Create a new topic
      commandLine: bash tools/newtopic.sh
      component: che-docs
      workingDir: /projects/che-docs
  - id: validate-modular-doc
    exec:
      label: Validate Modular Doc
      commandLine:
        echo 'Enter path to the file to validate and press Enter:'; read
        file; bash tools/test-adoc.sh $file;
      component: che-docs
      workingDir: /projects/che-docs
  - id: validate-links
    exec:
      label: Validate links
      commandLine: htmltest
      component: che-docs
      workingDir: /projects/che-docs
  - id: validate-language-changes
    exec:
      label: Validate language changes
      commandLine: sh tools/validate_language_changes.sh
      component: che-docs
      workingDir: /projects/che-docs
  - id: detect-unused-images
    exec:
      label: Detect unused images
      commandLine: bash tools/detect-unused-images.sh
      component: che-docs
      workingDir: /projects/che-docs
