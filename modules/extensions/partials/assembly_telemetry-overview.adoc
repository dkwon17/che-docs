:parent-context-of-telemetry-overview: {context}

[id="telemetry-overview_{context}"]
= Telemetry overview

:context: telemetry-overview

Telemetry is the explicit and ethical collection of operation data. By default, telemetry is not available in {prod}, but there is an abstract API that allows enabling telemetry using the plug-in mechanism. This approach is used in the xref:overview:hosted-che.adoc[] service where telemetry is enabled for every workspace.

This documentation includes a guide describing how to make your own telemetry client for {prod}, followed by an overview of the link:https://github.com/che-incubator/che-workspace-telemetry-woopra-plugin[{prod} Woopra Telemetry Plugin].

== Use cases
[id="use-cases_{context}"]

{prod} telemetry API allows tracking:

* Duration of a workspace utilization
* User-driven actions such as file editing, committing, and pushing to remote repositories.
* Programming languages and devfiles used in workspaces. See xref:end-user-guide:authoring-devfiles-version-2.adoc[]

== How it works
[id="how-it-works_{context}"]

When a {prod-short} workspace starts, the `che-theia` container starts the telemetry plug-in, which is responsible for sending telemetry events to a back-end plug-in. If the `$DEVWORKSPACE_TELEMETRY_BACKEND_PORT` environment variable was set in the workspace Pod, the telemetry plug-in will send events to a back-end plug-in listening at that port.

If the {prod-short} workspace has a telemetry back-end container running, and it is listening on `$CHE_WORKSPACE_TELEMETRY_BACKEND_PORT`, it takes the events sent from the telemetry plug-in, turns them into the back-end-specific representation of events, and sends them to the configured analytics service (for example, Segment or Woopra).

image::telemetry/telemetry_diagram.png[]

== Events sent to the back-end by the Che-Theia telemetry plug-in

[cols="2,5", options="header"]
:=== 
 Event: Description 
WORKSPACE_OPENED: Sent when Che-Theia starts running
COMMIT_LOCALLY: Sent when a commit has made locally with the `git.commit` Theia command
PUSH_TO_REMOTE: Sent when a Git push has been made with the `git.push` Theia command
EDITOR_USED: Sent when a file has been changed within the editor
:=== 

Other events such as `WORKSPACE_INACTIVE` and `WORKSPACE_STOPPED` can be detected within the back-end plug-in.

:context: {parent-context-of-telemetry-overview}