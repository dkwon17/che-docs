// monitoring-{prod-id-short}

[id="viewing-{prod-id-short}-metrics-on-grafana-dashboards"]
= Viewing {prod-short} Server from an OpenShift web console dashboard

After configuring the in-cluster Prometheus instance to collect {prod-short} Server JVM metrics, the metrics can be viewed from a custom dashboard within the `Administrator` perspective of the OpenShift web console.

.Prerequisites

* The in-cluster Prometheus instance is collecting metrics. See xref:proc_collecting-che-metrics-with-prometheus[].

.Procedure

. Create a ConfigMap in the `openshift-config-managed` {orch-namespace} containing the dashboard definition. The dashboard definition is based on Grafana 6.x dashboards, however, not all Grafana 6.x dashboard features are supported.
+
[source,terminal,subs="+attributes,quotes"]
----
$ kubectl create configmap grafana-dashboard-devspaces-server \
  --from-literal=devspaces-server-dashboard.json="$(curl https://gist.githubusercontent.com/dkwon17/24bf0ca90a1d2c4269f6adb9b856c1b7/raw/92cd0d712c980e232639b7270b11408a185f8b30/che-server-dashboard.json)" \
  -n openshift-config-managed
$ kubectl label configmap grafana-dashboard-devspaces-server console.openshift.io/dashboard=true -n openshift-config-managed
----

.Verification steps

. In the `Administrator` perspective of the OpenShift web console, navigate to `Observe > Dashboards` from the sidebar menu on the left.

. Select the `Dev Workspace Operator` dashboard under the `Dashboard` dropdown menu and verify that the dashboard panels contain data.
+
.Quick Facts
image::monitoring/monitoring-che-che-server-jvm-dashboard-quick-facts.png[The *JVM quick facts* panel, link="{imagesdir}/monitoring/monitoring-che-che-server-jvm-dashboard-quick-facts.png"]
+
.JVM Memory
image::monitoring/monitoring-che-che-server-jvm-dashboard-jvm-memory.png[The *JVM Memory* panel , link="{imagesdir}/monitoring/monitoring-che-che-server-jvm-dashboard-jvm-memory.png"]
+
.JVM Misc
image::monitoring/monitoring-che-che-server-jvm-dashboard-jvm-misc.png[The *JVM Misc* panel, link="{imagesdir}/monitoring/monitoring-che-che-server-jvm-dashboard-jvm-misc.png"]
+
.JVM Memory Pools (heap)
image::monitoring/monitoring-che-che-server-jvm-dashboard-jvm-memory-pools-heap.png[The *JVM Memory Pools (heap)* panel, link="{imagesdir}/monitoring/monitoring-che-che-server-jvm-dashboard-jvm-memory-pools-heap.png"]
+
.JVM Memory Pools (Non-Heap)
image::monitoring/monitoring-che-che-server-jvm-dashboard-jvm-memory-pools-non-heap.png[The *JVM Memory Pools (non-heap)* panel, link="{imagesdir}/monitoring/monitoring-che-che-server-jvm-dashboard-jvm-memory-pools-non-heap.png"]
+
.Garbage Collection
image::monitoring/monitoring-che-che-server-jvm-dashboard-garbage-collection.png[The *JVM garbage collection* panel, link="{imagesdir}/monitoring/monitoring-che-che-server-jvm-dashboard-garbage-collection.png"]
+
.Class loading
image::monitoring/monitoring-che-che-server-jvm-dashboard-classloading.png[The *JVM class loading* panel, link="{imagesdir}/monitoring/monitoring-che-che-server-jvm-dashboard-classloading.png"]
+
.Buffer Pools
image::monitoring/monitoring-che-che-server-jvm-dashboard-buffer-pools.png[The *JVM buffer pools* panel, link="{imagesdir}/monitoring/monitoring-che-che-server-jvm-dashboard-buffer-pools.png"]
